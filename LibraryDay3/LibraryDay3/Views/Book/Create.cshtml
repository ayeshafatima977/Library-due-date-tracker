@{
    ViewData["Title"]="Create";
    System.Diagnostics.Debug.WriteLine("VIEW - Rendering CREATE View\n-------------------------");
}

<h1>Add a Book to your Basket</h1>

<section>
    @{
        //Display itemized errors on all appropriate “Book” view pages.
        if ( ViewBag.Sucess!=null )
        {
            <p class="btn btn-success">Congratuations,@(ViewBag.Sucess)</p>
        }

        else if ( ViewBag.Exception!=null )
        {
            <p class="alert-danger">Following Errors Occured : Please Correct and resubmit</p>
            <ul class="alert-danger">
                @foreach ( Exception e in ViewBag.Exception.newExceptions )
                {
                    <li>@(e.Message)</li>
                }
            </ul>
        }
    }

</section>

<section>
    <form action="/Book/Create" method="get">

        <div>
            <label for="title">Title</label>
            <input type="text" id="title" name="title" value="" />
        </div>
        <div>
            <label for="author_id">Author</label>
            <select id="authorID" name="authorID">

                @foreach ( Author author in ViewBag.Authors )
                {
                    @if ( author.ID.ToString()==ViewBag.AuthorID )
                    {
                        <option value="@(author.ID)" selected>@(author.Name)</option>
                    }
                    else
                    {
                        <option value="@(author.ID)">@(author.Name)</option>
                    }

                }
            </select>
        </div>
        <div>
            <label for="publicationDate">Publication Date</label>
            <input type="date" id="publicationDate" name="publicationDate" value="@(ViewBag.PublicationDate)" />
        </div>

        <button type="submit">Add Book</button>
    </form>

</section>